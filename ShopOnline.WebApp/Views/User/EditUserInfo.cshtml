@model ShopOnline.Dto.UserDto
@{
    ViewBag.Title = "EditUserInfo";
}
@section css
{
    <style>
        * {
            margin: 0;
            padding: 0;
            font-family: "微软雅黑";
            /*overflow: hidden;*/
        }

        body {
            width: 100%;
            height: 100%;
        }

        .bodyer {
            width: 63%;
            height: 980px;
            border: 2px solid gainsboro;
            margin-left: 20%;
            margin-top: 3%;
        }

        .classarea>div:first-child {
            background: black;
        }

        .classarea h1 {
            text-align: center;
            color: white;
            line-height: 80px;
            font-size: 20px;
        }

        .classarea>div>center>p {
            color: white;
        }

        #boxul ul li {
            float: left;
            text-align: center;
            margin-right: 2%;
            margin-left: 2%;
        }

        #boxul ul {
            margin-left: 15%;
            margin-top: -5%;
        }

        #boxul {
            background-color: gainsboro;
        }

        .contain {
            margin-top: 20%;
            /*border:1px red solid;*/
            /*height: 300px;*/
            /*width:25%;*/
        }

        .layui-tab {
            /*background-color: blueviolet;*/
            border-bottom: 1px solid gainsboro;
            color: black;
            width: 850px;
            /*height: 500px;
			margin-left: 40%;*/
        }

        .layui-nav>.layui-nav-item {
            color: black
        }

        .layui-nav>li {
            color: black
        }

        .white {
            color: black
        }

        #pstyle {
            background-color: gainsboro;
            font-size: 16px;
        }

        #pstyle p {
            margin-left: 350px;
        }

        #buttonstyle {
            background-color: black;
            color: white;
            height: 40px;
            width: 100px
        }

        #formul li {
            float: left
        }

        

        #formul li:nth-child(0) {
            position: relative;
            left: 10%;
            width: 20%;
        }

        #contactus {
            border: 1px solid gainsboro;
            position: relative;
            left: 10%;
            top: 3%;
            width: 250px;
            height: 350px;
        }

        #contactus li {
            float: none;
            margin-left: 20px;
        }

        #contactus {
            position: relative;
            left: 10%;
        }
    </style>
}
<!--主体-->
<div class="layui-card"style="margin-top: 6%">
    <div class="layui-card-header layui-row">
        <fieldset class="layui-elem-field layui-field-title " style="margin-top: 30px;">
            <legend>个人信息设置</legend>
        </fieldset>
    </div>
    <div class="layui-card-body">
        <div class="layui-row bodyer " >
            <!--  //选项卡-->
            <div class="layui-col-md12 layui-col-xs12 layui-col-sm12 " style="line-height: 30px;">

                <div class="layui-tab layui-tab-card">
                    <ul class="layui-tab-title" id="menu">
                        <li class="layui-this">个人资料</li>
                        <li >收货地址</li>
                        <li >我的订单</li>
                        <li >物流信息</li>
                        <li >购物车</li>
                        <li>其他</li>
                    </ul>
                    <div class="layui-tab-content" style="height: 100px;">

                        <div class="layui-tab-item layui-show">
                            <br />

                            <div id="pstyle">
                                <p id="p">我的资料</p>
                            </div>
                            <br />
                            <!--//表单-->
                            <div class="layui-row">
                                <div class="layui-form layui-col-md5" >
                               @Html.HiddenFor(m => m.Id)
                               @Html.HiddenFor(m=>m.ImagePath)
                               <div class="layui-form-item ">
                                   <label class="layui-form-label">头像：</label>
                                   <div class="layui-input-inline">
                                       <img src="@Model.ImagePath" id="displayImg" width="50%" alt="Alternate Text" />
                                       <button type="button" class="layui-btn layui-btn-sm layui-btn-primary" id="UploadImage">
                                           <i class="layui-icon">&#xe67c;</i>上传图片
                                       </button>
                                   </div>
                               </div>
                               <div class="layui-form-item ">
                                   <label class="layui-form-label">账号名称：</label>
                                   <div class="layui-input-inline">
                                       <input type="text" name="UserName" value="@Model.UserName" required lay-verify="required"
                                              autocomplete="off" class="layui-input">
                                   </div>
                               </div>
                               <div class="layui-form-item">
                                   <label class="layui-form-label">您的密码:</label>
                                   <div class="layui-input-inline">
                                       <input type="password" name="UserPassword" value="" required lay-verify="required"
                                              autocomplete="off" class="layui-input">
                                   </div>

                               </div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">您的手机号:</label>
                                        <div class="layui-input-inline">
                                            <input type="text" name="Phone" value="@Model.Phone"  lay-verify="required"
                                                   autocomplete="off" class="layui-input">
                                        </div>

                                    </div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">您的邮箱:</label>
                                        <div class="layui-input-inline">
                                            <input type="email" name="Email" value="@Model.Email " required lay-verify="required"
                                                   autocomplete="off" class="layui-input">
                                        </div>

                                    </div>
                                    <button type="submit" lay-filter="updateUser" lay-submit="" class="layui-btn layui-btn-sm layui-btn-primary layui-col-md3 layui-col-md-offset7">修改 </button>

                                </div>

                                <div id="contactus" class="layui-col-md5">
                                    <h2>客服中心</h2>
                                    <hr />
                                    <ul>
                                        <li>客服电话：028-820-4888</li>
                                        <li></li>
                                        <li><input type="button" id="buttonstyle" value="在线咨询" style="border: none;" /></li>
                                        <li>常见问题</li>
                                        <hr />
                                        <li>如何下订单?</li>
                                        <li>如何查看订单配送状况?</li>
                                        <li>如何修改和取消订单?</li>
                                        <li>查看所有</li>
                                    </ul>

                                </div>
                            
                            </div>
                        </div>
                        <div class="layui-tab-item ">
                            <h2>收货地址</h2>
                            <hr>
                            <label class="layui-form-label">您的收货地址：</label>
                            <div class="layui-input-inline">
                                <input type="text" name="text" required lay-verify="required" autocomplete="off"
                                       class="layui-input">
                            </div>

                            <div class="layui-input-inline">
                                <label class="layui-form-label">添加新的收货地址</label>
                                <input type="button" id="buttonstyle" value="+" style="border: none;" />
                            </div>
                        </div>

                        <div class="layui-tab-item ">
                            <div class="layui-form-item">
                                <h2>订单详情</h2>
                                <div id="pstyle">
                                    <p id="p">我的订单</p>
                                </div>
                                <br />
                                <form id="formul" style="margin-top: 30px;">
                                    <div class="layui-row">
                                        <div class="layui-form-item ">
                                            <label class="layui-form-label">商品单号：</label>
                                            <div class="layui-input-inline">
                                                <input type="password" name="password" required lay-verify="required"
                                                       autocomplete="off" class="layui-input">
                                            </div>
                                        </div>
                                        <div class="layui-form-item">
                                            <label class="layui-form-label">商品名称</label>
                                            <div class="layui-input-inline">
                                                <input type="password" name="password" required lay-verify="required"
                                                       autocomplete="off" class="layui-input">
                                            </div>

                                        </div>
                                        <div class="layui-form-item">
                                            <label class="layui-form-label">商品数量</label>
                                            <div class="layui-input-inline">
                                                <input type="password" name="password" required lay-verify="required"
                                                       autocomplete="off" class="layui-input">
                                            </div>

                                        </div>
                                        <div class="layui-form-item">
                                            <label class="layui-form-label">商品价格：</label>
                                            <div class="layui-input-inline">
                                                <input type="password" name="password" required lay-verify="required"
                                                       autocomplete="off" class="layui-input">
                                            </div>

                                        </div>
                                        <div class="layui-form-item">
                                            <label class="layui-form-label">优惠券：</label>
                                            <div class="layui-input-inline">
                                                <input type="password" name="password" required lay-verify="required"
                                                       autocomplete="off" class="layui-input">
                                            </div>

                                        </div>
                                        <div class="layui-form-item">
                                            <label class="layui-form-label">商品总价</label>
                                            <div class="layui-input-inline">
                                                <input type="password" name="password" required lay-verify="required"
                                                       autocomplete="off" class="layui-input">
                                            </div>

                                        </div>
                                        <div class="layui-form-item">
                                            <label class="layui-form-label">交易时间</label>
                                            <div class="layui-input-inline">
                                                <input type="datetime" name="password" required lay-verify="required"
                                                       autocomplete="off" class="layui-input">
                                            </div>

                                        </div>
                                        <div class="layui-form-item">
                                            <label class="layui-form-label">交易状态</label>
                                            <div class="layui-input-inline">
                                                <input type="checkbox" checked="checked" value="成功" />成功
                                                <input type="checkbox" value="失败" />失败
                                            </div>

                                        </div>

                                    </div>

                                    <li id="contactus">
                                        <h2>客服中心</h2>
                                        <hr />
                                        <ul>
                                            <li>客服电话：028-820-4888</li>
                                            <li></li>
                                            <li>
                                                <input type="button" id="buttonstyle" value="在线咨询" style="border: none;" />
                                            </li>
                                            <li>常见问题</li>
                                            <hr />
                                            <li>如何下订单?</li>
                                            <li>如何查看订单配送状况?</li>
                                            <li>如何修改和取消订单?</li>
                                            <li>查看所有</li>
                                        </ul>

                                    </li>
                                </form>

                            </div>
                        </div>
                        <div class="layui-tab-item ">
                            <div class="layui-form-item">
                                <h2>物流详情</h2>
                                <div id="pstyle">
                                    <p id="p">我的物流</p>
                                </div>
                                <br />
                                <ul id="formul" style="margin-top: 30px;">
                                    <li>
                                        <img src="img/Perfume2.png" width="100px" />
                                        <div class="layui-form-item">
                                            <label class="layui-form-label">物流最新更新日期</label>
                                            <div class="layui-input-inline">
                                                <input type="datetime" name="datetime" required lay-verify="required"
                                                       autocomplete="off" class="layui-input">
                                            </div>

                                        </div>
                                        <p>
                                            <a href="">
                                                查看更多
                                            </a>
                                        </p>
                                    </li>
                                    <li id="contactus">
                                        <h2>客服中心</h2>
                                        <hr />
                                        <ul>
                                            <li>客服电话：028-820-4888</li>
                                            <li></li>
                                            <li>
                                                <input type="button" id="buttonstyle" value="在线咨询"
                                                       style="border: none;" />
                                            </li>
                                            <li>常见问题</li>
                                            <hr />
                                            <li>如何下订单?</li>
                                            <li>如何查看订单配送状况?</li>
                                            <li>如何修改和取消订单?</li>
                                            <li>查看所有</li>
                                        </ul>

                                    </li>
                                </ul>

                            </div>
                        </div>
                        <div class="layui-tab-item">
                            <div class="layui-form-item">
                                <h2>购物车</h2>
                                <div id="pstyle">

                                    <label id="p" class="layui-form-label">商品数量</label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="text" required lay-verify="required" autocomplete="off"
                                               class="layui-input">
                                    </div>
                                </div>
                                <br />


                                <table class="layui-table"
                                       lay-data="{width: 840, height:330, url:'/demo/table/user/', page:true, id:'idTest'}"
                                       lay-filter="demo">
                                    
                                    <thead>
                                        <tr>
                                            <th lay-data="{type:'checkbox', fixed: 'left'}"></th>
                                            <th lay-data="{field:'id', width:80, sort: true, fixed: true}">商品ID</th>
                                            <th lay-data="{field:'username', width:80}">商品名称</th>
                                            <th lay-data="{field:'sex', width:80, sort: true}">单价</th>
                                            <th lay-data="{field:'city', width:80}">规格</th>
                                            <th lay-data="{field:'sign', width:160}">数量</th>
                                            <th lay-data="{field:'experience', width:80, sort: true}">价格</th>

                                            <th lay-data="{field:'classify', width:80}">其他...</th>

                                        </tr>
                                    </thead>
                                </table>

                            </div>
                        </div>

                        <div class="layui-tab-item">
                            <div class="layui-form-item">
                                <h2>其他</h2>
                                <div id="pstyle">
                                    <p id="p">客服中心</p>
                                </div>
                                <br />
                                <ul id="formul" style="margin-top: 30px;">
                                    <li>其他更多请咨询客服中心</li>



                                    <li id="contactus">
                                        <h2>客服中心</h2>
                                        <hr />
                                        <ul>
                                            <li>客服电话：028-820-4888</li>
                                            <li></li>
                                            <li>
                                                <input type="button" id="buttonstyle" value="在线咨询" style="border: none;" />
                                            </li>
                                            <li>常见问题</li>
                                            <hr />
                                            <li>如何下订单?</li>
                                            <li>如何查看订单配送状况?</li>
                                            <li>如何修改和取消订单?</li>
                                            <li>查看所有</li>
                                        </ul>

                                    </li>
                                </ul>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

@section scripts
{
    
    <script>
        layui.use(['form', 'layer', 'upload','element'],
            function() {
                $ = layui.jquery;
                var form = layui.form;
                var layer = layui.layer;
                var upload = layui.upload;
                var element = layui.element;
                //自定义验证规则
                form.verify({
                    nikename: function(value) {
                        if (value.length < 5) {
                            return '昵称至少得5个字符啊';
                        }
                    },
                    pass: [/(.+){6,12}$/, '密码必须6到12位'],
                    repass: function(value) {
                        if ($('#L_pass').val() !== $('#L_repass').val()) {
                            return '两次密码不一致';
                        }
                    }
                });
                upload.render({
                    elem: '#UploadImage',
                    url: '@Url.Action("UploadImage", "User")', //必填项
                    field: 'file',
                    done: function(res) {
                        //如果上传失败
                        if (res.code !== 0) {
                            return layer.msg(res.Info);
                        } else {
                            $("#displayImg").attr("src", res.data);
                            layer.msg(res.Info);
                            $("#ImagePath").val(res.data);
                        };
                    }
                });
                //监听提交
                form.on('submit(updateUser)',
                    function(data) {
                        console.log(data);
                        //发异步,
                        $.post("@Url.Action("EditUserInfo", "User")",
                            data.field,
                            function(res) {
                                layer.msg(res.Info);
                                if (res.IsSuccess) {
                                    href.reload();
                                }
                            });

                        return false;
                    });

            });

        $("#menu li").click(function() {
            var str = $(this).text();
            console.log(str);
            if (str==="收货地址") {
                console.log("666");
            } else if (str === "我的订单") {
                console.log("556");

            } else if (str === "购物车") {
                console.log("776");

            } else {
                return;

            }
        });


    </script>
}
